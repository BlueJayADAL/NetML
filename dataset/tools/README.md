This folder contains tools for downloading, scanning, and analyzing malware samples.

**malwares.csv**  
This file is used to keep track of information related to each sample.  Each sample's md5 hash (which is also the download name from MalShare) serves as its index.  Here's a description of each attribute:
* scanned: wether or not the sample has been submitted to VirusTotal
* retrieved: wether or not the sample's VirusTotal scan results have been retrieved
* scan_results: total number of detections by antivirus represented in VirusTotal
* analyzed: wether or not the sample has been analyzed on any.run
* pcap_sucess: wether or not the sample produced a pcap file on any.run
* download_date: date sample was downloaded
* file_type: type of sample

**labels.txt**  
This file stores the labels generated by antivirus on VirusTotal.  I planned on using these labels to generate a single label for each sample, but it looks like almost all of the files from MalShare get labeled as Trojans.  I'm still keeping track of labels just incase.

**configuration.conf**  
The configuration file that specifies file paths and API keys.  Here's a description:
* malware_folder: folder to which malware samples will be downloaded
* csv_path: path to csv file (can be an absolute path or just the csv file name if csv is in same directory as python files)
* labels: path to labels file
* run_type: how to run malshare_download.py.  If set to 0, a new csv file will be produced; if 1, then an existing csv file will be used.
* MalShare api_key: API key for MalShare
* file_type: type of files to download from MalShare.  Set to pe32 by default since these run the best on any.run
* VirusTotal api_key: API key for VirusTotal

**malshare_download.py**  
Used to download all samples of specified type that were submitted in the last 24 hours.  I usually run this program every morning to get the previous day's samples.  Uses either an existing csv file (if configuration file specifies "1" for run_type) or creates a new csv file to keep track of samples.  Also computes the md5 hash of each downloaded file to make verify downloads; if the md5 hash does not match the one given by MalShare, then the user will be notified.  Here's how it looks:
![Downloading](https://github.com/BlueJayADAL/NetML/raw/master/dataset/tools/images/MalShare%20Download.png)

**vt_submission.py**  
Used to submit all new samples to VirusTotal.  VirusTotal has an API limit of 4 requests per minute, meaning that running this and vt_retrieval.py will usually take a few hours (a time estimate is given when run).  VirusTotal will reject some files, so I've decided just to drop those samples (user gets notified).  Also catches errors with API keys.  Here's how it looks:
![Submitting](https://github.com/BlueJayADAL/NetML/raw/master/dataset/tools/images/VT%20Submission.png)

**vt_retrieval.py**  
Used to retrieve scan results of all new samples.  Usually used right after vt_submission.py.  I accounted for files that might still be being scanned, so that all results are retrieved.  The total number of detections is recorded and the detected labels are appended to labels.txt.  API request limit still applies, so takes a long time.

**anyrun_simulate.py**  
Tool for interacting with the csv file when analyzing samples on any.run.  Will record the total number of files submitted in the session, as well as how many pcap files have been produced.  Useful for keeping track of which sample to submit and for automatically updating information about the sample.  Here's how it looks:
![Analyzing](https://github.com/BlueJayADAL/NetML/raw/master/dataset/tools/images/anyrun_simulate.png)
